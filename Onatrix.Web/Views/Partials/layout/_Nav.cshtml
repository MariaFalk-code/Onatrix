@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Cms.Web.Common.PublishedModels
@using Umbraco.Cms.Core.Models.PublishedContent
@using Umbraco.Cms.Core.PublishedCache
@using Umbraco.Cms.Core.Routing
@using Umbraco.Cms.Core.Services.Navigation

@inject IVariationContextAccessor VariationContextAccessor
@inject IPublishedContentCache PublishedContentCache
@inject IDocumentNavigationQueryService DocumentNavigationQueryService
@inject IPublishedValueFallback PublishedValueFallback
@inject IPublishedUrlProvider PublishedUrlProvider

@{
  var rootContent = Umbraco.ContentAtRoot();
  var siteSettings = rootContent.OfType<SiteSettings>().FirstOrDefault();
  var logo = siteSettings?.SiteLogo;
  var siteName = siteSettings?.SiteName;

  var selection = Model.Root().Children().Where(x => x.IsVisible(PublishedValueFallback)).ToArray();
}

<header>
  <div class="logo">
    @if (logo != null)
    {
      <a href="@Url.Content("~/")">
        <img src="@logo.Url()" alt="@siteName" />
      </a>
    }
    else if (!string.IsNullOrEmpty(siteName))
    {
      <a href="@Url.Content("~/")">@siteName</a>
    }
    else
    {
      <a href="@Url.Content("~/")">Onatrix</a>
    }
  </div>
  <nav>
    @if (selection?.Length > 0)
    {
      <ul>
        @foreach (var item in selection)
        {
          <li class="@(item.IsAncestorOrSelf(Model) ? "current" : null)">
            <a href="@item.Url(PublishedUrlProvider)">@item.Name</a>
          </li>
        }
      </ul>
    }
  </nav>
  <div>
    <a href="@Url.Content("~/search")"><i class="fas fa-search"></i></a>
  </div>
</header>
